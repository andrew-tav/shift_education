<!DOCTYPE html>
<html>
<head>
    <title>Promise Practice</title>
    <style>
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
        .success { background-color: #4CAF50; color: white; }
        .error { background-color: #f44336; color: white; }
        .info { background-color: #2196F3; color: white; }
        .log { margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 5px; }
        .log-entry { margin: 5px 0; padding: 5px; border-left: 3px solid #ccc; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÆ –ü—Ä–∞–∫—Ç–∏–∫–∞ —Å Promise</h1>
        
        <button class="button success" id="successBtn">–£—Å–ø–µ—à–Ω—ã–π Promise</button>
        <button class="button error" id="errorBtn">Promise —Å –æ—à–∏–±–∫–æ–π</button>
        <button class="button info" id="sequenceBtn">–¶–µ–ø–æ—á–∫–∞ Promise</button>
        
        <div class="log" id="log"></div>
    </div>

    <script>
        const log = document.getElementById('log');
        
        function addLog(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.style.borderLeftColor = type === 'error' ? '#f44336' : 
                                        type === 'success' ? '#4CAF50' : '#2196F3';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        // üìå 1. –°–û–ó–î–ê–ù–ò–ï –ü–†–û–°–¢–û–ì–û PROMISE
        function createSuccessPromise() {
            addLog('üîπ –°–æ–∑–¥–∞–µ–º —É—Å–ø–µ—à–Ω—ã–π Promise...');
            
            /* 
            –ö–û–ù–°–¢–†–£–ö–¢–û–† PROMISE:
            - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å (executor)
            - Executor –ø–æ–ª—É—á–∞–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞: resolve –∏ reject
            - resolve() - —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
            - reject() - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π
            */
            return new Promise((resolve, reject) => {
                addLog('Promise –Ω–∞—á–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ...');
                
                // –ò–º–∏—Ç–∏—Ä—É–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é (–∑–∞–≥—Ä—É–∑–∫–∞, –∑–∞–ø—Ä–æ—Å –∏ —Ç.–¥.)
                setTimeout(() => {
                    const result = '–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã! ‚úÖ';
                    addLog('Promise –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É');
                    resolve(result); // –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
                }, 2000);
            });
        }

        // üìå 2. PROMISE –° –û–®–ò–ë–ö–û–ô
        function createErrorPromise() {
            addLog('üîπ –°–æ–∑–¥–∞–µ–º Promise —Å –æ—à–∏–±–∫–æ–π...');
            
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    const error = new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏! ‚ùå');
                    addLog('Promise –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π');
                    reject(error); // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π
                }, 2000);
            });
        }

        // üìå 3. –û–ë–†–ê–ë–û–¢–ö–ê PROMISE –° –ü–û–ú–û–©–¨–Æ .then() .catch()
        document.getElementById('successBtn').addEventListener('click', function() {
            addLog('--- –ó–ê–ü–£–°–ö –£–°–ü–ï–®–ù–û–ì–û PROMISE ---');
            
            createSuccessPromise()
                .then(result => {
                    /* 
                    .then() –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ Promise —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω (resolve)
                    - –ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ resolve()
                    */
                    addLog(`‚úÖ then: ${result}`, 'success');
                })
                .catch(error => {
                    /*
                    .catch() –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ Promise –∑–∞–≤–µ—Ä—à–µ–Ω —Å –æ—à–∏–±–∫–æ–π (reject)
                    - –ü–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É –∏–∑ reject()
                    */
                    addLog(`‚ùå catch: ${error.message}`, 'error');
                })
                .finally(() => {
                    /*
                    .finally() –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –í–°–ï–ì–î–ê, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è cleanup –æ–ø–µ—Ä–∞—Ü–∏–π
                    */
                    addLog('üèÅ finally: –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (—É—Å–ø–µ—Ö –∏–ª–∏ –æ—à–∏–±–∫–∞)');
                });
        });

        document.getElementById('errorBtn').addEventListener('click', function() {
            addLog('--- –ó–ê–ü–£–°–ö PROMISE –° –û–®–ò–ë–ö–û–ô ---');
            
            createErrorPromise()
                .then(result => {
                    addLog(`‚úÖ then: ${result}`, 'success');
                })
                .catch(error => {
                    addLog(`‚ùå catch: ${error.message}`, 'error');
                })
                .finally(() => {
                    addLog('üèÅ finally: –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (—É—Å–ø–µ—Ö –∏–ª–∏ –æ—à–∏–±–∫–∞)');
                });
        });

        // üìå 4. –¶–ï–ü–û–ß–ö–ê PROMISE (CHAINING)
        document.getElementById('sequenceBtn').addEventListener('click', function() {
            addLog('--- –ó–ê–ü–£–°–ö –¶–ï–ü–û–ß–ö–ò PROMISE ---');
            
            // –ü–µ—Ä–≤—ã–π Promise
            new Promise((resolve, reject) => {
                setTimeout(() => {
                    addLog('üîπ –®–∞–≥ 1: –ü–æ–ª—É—á–∞–µ–º userId...');
                    resolve(123); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º userId
                }, 1000);
            })
            .then(userId => {
                /* 
                –¶–ï–ü–û–ß–ö–ê .then():
                - –ö–∞–∂–¥—ã–π .then() –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ
                - –ú–æ–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–ª–∏ –Ω–æ–≤—ã–µ Promise
                */
                addLog(`üîπ –®–∞–≥ 2: –ü–æ–ª—É—á–∏–ª–∏ userId = ${userId}, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...`);
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({ userId, name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤', email: 'ivan@example.com' });
                    }, 1000);
                });
            })
            .then(userData => {
                addLog(`üîπ –®–∞–≥ 3: –ü–æ–ª—É—á–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${userData.name}`);
                addLog(`üîπ –®–∞–≥ 4: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...`);
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve({
                            ...userData,
                            orders: ['–ó–∞–∫–∞–∑ #1', '–ó–∞–∫–∞–∑ #2', '–ó–∞–∫–∞–∑ #3']
                        });
                    }, 1000);
                });
            })
            .then(finalData => {
                addLog(`‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:`, 'success');
                addLog(`   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${finalData.name}`);
                addLog(`   Email: ${finalData.email}`);
                addLog(`   –ó–∞–∫–∞–∑—ã: ${finalData.orders.join(', ')}`);
            })
            .catch(error => {
                addLog(`‚ùå –û—à–∏–±–∫–∞ –≤ —Ü–µ–ø–æ—á–∫–µ: ${error.message}`, 'error');
            });
        });
    </script>
</body>
</html>