<!DOCTYPE html>
<html>
<head>
    <title>Fetch API Practice</title>
    <style>
        .post { border: 1px solid #ddd; margin: 10px 0; padding: 15px; border-radius: 5px; }
        .post h3 { margin-top: 0; color: #333; }
        .loading { text-align: center; padding: 20px; font-style: italic; color: #666; }
        .error { background: #ffebee; border-color: #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåê –ü—Ä–∞–∫—Ç–∏–∫–∞ —Å Fetch API</h1>
        
        <div class="controls">
            <button class="button success" id="getPostsBtn">–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç—ã</button>
            <button class="button info" id="getUserBtn">–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
            <button class="button error" id="invalidUrlBtn">–ù–µ–≤–µ—Ä–Ω—ã–π URL (–æ—à–∏–±–∫–∞)</button>
            <button class="button" id="createPostBtn">–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç (POST)</button>
        </div>
        
        <div id="loading" class="loading" style="display: none;">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <div id="results"></div>
        <div class="log" id="log3"></div>
    </div>

    <script>
        const results = document.getElementById('results');
        const loading = document.getElementById('loading');
        const log3 = document.getElementById('log3');

        function addLog3(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.style.borderLeftColor = type === 'error' ? '#f44336' : 
                                        type === 'success' ? '#4CAF50' : '#2196F3';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log3.appendChild(entry);
        }

        // üìå 1. –ë–ê–ó–û–í–´–ô GET-–ó–ê–ü–†–û–° –° FETCH
        document.getElementById('getPostsBtn').addEventListener('click', async function() {
            addLog3('--- GET –ó–ê–ü–†–û–°: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ ---');
            loading.style.display = 'block';
            results.innerHTML = '';
            
            try {
                /* 
                üîπ fetch() –í–°–ï–ì–î–ê –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Promise
                üîπ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è GET –∑–∞–ø—Ä–æ—Å
                üîπ –ë–∞–∑–æ–≤—ã–π URL: JSONPlaceholder (—Ç–µ—Å—Ç–æ–≤–æ–µ API)
                */
                addLog3('1. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º GET –∑–∞–ø—Ä–æ—Å –∫ API...');
                
                const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=3');
                
                /* 
                üîπ Response object —Å–æ–¥–µ—Ä–∂–∏—Ç:
                - status: HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥ (200, 404, 500...)
                - ok: boolean (true –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å 200-299)
                - headers: –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞
                */
                addLog3(`2. –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç: Status ${response.status}, OK: ${response.ok}`);
                
                if (!response.ok) {
                    // –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 200-299
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                // üîπ response.json() –ø–∞—Ä—Å–∏—Ç JSON —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞
                const posts = await response.json();
                addLog3(`3. –î–∞–Ω–Ω—ã–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω—ã, –ø–æ–ª—É—á–µ–Ω–æ ${posts.length} –ø–æ—Å—Ç–æ–≤`, 'success');
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                results.innerHTML = posts.map(post => `
                    <div class="post">
                        <h3>üìù ${post.title}</h3>
                        <p>${post.body}</p>
                        <small>ID: ${post.id}, UserID: ${post.userId}</small>
                    </div>
                `).join('');
                
            } catch (error) {
                addLog3(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                results.innerHTML = `<div class="post error">–û—à–∏–±–∫–∞: ${error.message}</div>`;
            } finally {
                loading.style.display = 'none';
            }
        });

        // üìå 2. GET –ó–ê–ü–†–û–° –° –ü–ê–†–ê–ú–ï–¢–†–ê–ú–ò
        document.getElementById('getUserBtn').addEventListener('click', async function() {
            addLog3('--- GET –ó–ê–ü–†–û–°: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ---');
            loading.style.display = 'block';
            results.innerHTML = '';
            
            try {
                const userId = Math.floor(Math.random() * 10) + 1; // –°–ª—É—á–∞–π–Ω—ã–π ID 1-10
                addLog3(`1. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID: ${userId}`);
                
                const response = await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`);
                
                if (!response.ok) {
                    throw new Error(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω! Status: ${response.status}`);
                }
                
                const user = await response.json();
                addLog3(`2. –ü–æ–ª—É—á–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${user.name}`, 'success');
                
                results.innerHTML = `
                    <div class="post">
                        <h3>üë§ ${user.name}</h3>
                        <p><strong>Email:</strong> ${user.email}</p>
                        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${user.phone}</p>
                        <p><strong>Website:</strong> ${user.website}</p>
                        <p><strong>–ö–æ–º–ø–∞–Ω–∏—è:</strong> ${user.company.name}</p>
                        <p><strong>–ì–æ—Ä–æ–¥:</strong> ${user.address.city}</p>
                    </div>
                `;
                
            } catch (error) {
                addLog3(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                results.innerHTML = `<div class="post error">${error.message}</div>`;
            } finally {
                loading.style.display = 'none';
            }
        });

        // üìå 3. –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö –°–ï–¢–ò
        document.getElementById('invalidUrlBtn').addEventListener('click', async function() {
            addLog3('--- –û–®–ò–ë–ö–ê –°–ï–¢–ò: –ù–µ–≤–µ—Ä–Ω—ã–π URL ---');
            loading.style.display = 'block';
            results.innerHTML = '';
            
            try {
                // üîπ –≠—Ç–æ—Ç URL –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ —Å–µ—Ç–∏
                const response = await fetch('https://invalid-url-that-does-not-exist.com/data');
                const data = await response.json();
                
            } catch (error) {
                /* 
                üîπ Fetch –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –¥–ª—è:
                - –ü—Ä–æ–±–ª–µ–º —Å —Å–µ—Ç—å—é (–Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –Ω–µ–≤–µ—Ä–Ω—ã–π URL)
                - CORS –æ—à–∏–±–æ–∫
                - –ù–æ –ù–ï –¥–ª—è HTTP –æ—à–∏–±–æ–∫ (404, 500) - –∏—Ö –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Ä—É—á–Ω—É—é
                */
                addLog3(`‚ùå –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
                results.innerHTML = `
                    <div class="post error">
                        <h3>üåê –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞</h3>
                        <p>${error.message}</p>
                        <p><small>Fetch –Ω–µ —Å–º–æ–≥ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É URL</small></p>
                    </div>
                `;
            } finally {
                loading.style.display = 'none';
            }
        });

        // üìå 4. POST –ó–ê–ü–†–û–° - –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–•
        document.getElementById('createPostBtn').addEventListener('click', async function() {
            addLog3('--- POST –ó–ê–ü–†–û–°: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ ---');
            loading.style.display = 'block';
            results.innerHTML = '';
            
            try {
                const newPost = {
                    title: '–ù–æ–≤—ã–π –ø–æ—Å—Ç —Å Fetch API',
                    body: '–≠—Ç–æ—Ç –ø–æ—Å—Ç –±—ã–ª —Å–æ–∑–¥–∞–Ω —Å –ø–æ–º–æ—â—å—é JavaScript Fetch API',
                    userId: 1
                };
                
                addLog3('1. –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏...');
                
                const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
                    method: 'POST', // üîπ –£–∫–∞–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥
                    headers: {
                        'Content-Type': 'application/json', // üîπ –¢–∏–ø –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                    },
                    body: JSON.stringify(newPost) // üîπ –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—ä–µ–∫—Ç –≤ JSON —Å—Ç—Ä–æ–∫—É
                });
                
                addLog3(`2. POST –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, —Å—Ç–∞—Ç—É—Å: ${response.status}`);
                
                if (!response.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞! Status: ${response.status}`);
                }
                
                const createdPost = await response.json();
                addLog3(`3. –ü–æ—Å—Ç —Å–æ–∑–¥–∞–Ω! ID: ${createdPost.id}`, 'success');
                
                results.innerHTML = `
                    <div class="post">
                        <h3>‚úÖ –ü–æ—Å—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!</h3>
                        <p><strong>ID:</strong> ${createdPost.id}</p>
                        <p><strong>–ó–∞–≥–æ–ª–æ–≤–æ–∫:</strong> ${createdPost.title}</p>
                        <p><strong>–¢–µ–∫—Å—Ç:</strong> ${createdPost.body}</p>
                        <p><strong>UserID:</strong> ${createdPost.userId}</p>
                        <p><em>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: JSONPlaceholder –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–æ –∏–º–∏—Ç–∏—Ä—É–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç</em></p>
                    </div>
                `;
                
            } catch (error) {
                addLog3(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                results.innerHTML = `<div class="post error">${error.message}</div>`;
            } finally {
                loading.style.display = 'none';
            }
        });
    </script>
</body>
</html>